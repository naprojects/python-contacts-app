{% extends 'layout.html' %}

{% block body %}
{% with messages = get_flashed_messages() %} <!-- AcÃ¡ creamos una variable para mensajes -->
{% if messages %}
{% for message in messages %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    {{ message }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
{% endif  %}
{% endwith %}
<div>
    <h2>Manage contacts</h2>
</div>
<div class="col-md-9">
    <div class="card card-body">
        <form action="/add_contact" class="row row-cols-lg-auto g-3 align-items-center justify-content-center"  method="POST">
            <div class="col-auto">
                <input type="text" class="form-control" name="fullname" placeholder="Fullname" required>
            </div>
            <div class="col-auto">
                <input type="text" class="form-control" name="phone" placeholder="Phone" required>
            </div>
            <div class="col-auto">
                <input type="text" class="form-control" name="email" placeholder="Email" required>
            </div>
            <div class="col-auto">
                <button type="submit" class="btn btn-success">Save</button>
            </div>
        </form>
    </div>
</div>
<div class="col-md-9">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <td>Fullname</td>
                <td>Phone</td>
                <td>Email</td>
                <td>Operations</td>
            </tr>
        </thead>
        <tbody>
            {% for contact in contacts %}
            <tr>
                <td>{{ contact.1 }}</td>
                <td>{{ contact.2 }}</td>
                <td>{{ contact.3 }}</td>
                <td>
                    <a href="/edit/{{ contact.0 }}" class="btn btn-warning">Edit</a>
                    <a href="/delete/{{ contact.0 }}" class="btn btn-danger">Delete</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}